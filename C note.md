---
title: C primer plus 笔记
---

### History

1. [c标准相关的概念](https://www.cnblogs.com/grooovvve/p/12907659.html)
2. C 语言的标准的历史

### Chapter 2 Introducing C

1. #include 是预处理指令
2. 头文件不包含具体实现，只包含变量和函数的定义，还有常量等
3. 头文件的作用就是帮助编译器中的链接器找到代码
4. main 函数是 C 程序的入口，绝大多数 C 程序都是从 main 函数开始执行
5. main 函数的返回值为 int，返回值返回到操作系统
6. C90 及之前的标准接受没有返回值的 main 函数，一些编译器接受main函数的返回值为 void 但是不建议这么做
7. C99 开始支持单行注释
8. 变量声明包含数据类型和标识符，分号不可省略，是语句的一部分
9. 变量必须在使用前声明，C99开始，变量可以在任意位置声明，之前的标准则要求所有的声明必须在 block 的头部
10. C语言的标识符只能使用大小写字母，数组和下划线，必须以下划线或者字母开头
11. C99 开始标识符最大长度为 63，外部标识符最大长度为 31。C90支持的最大长度分别为 31 和 6，更早的编译器则通常只支持 8 个字符。
12. 如果有超出最大长度的标识符，最后的具体行为则依编译器而定
13. 操作系统和 C 库通常使用一个或两个下划线开头的标识符，所以自己编写的代码中尽量避开这种标识符，虽然不会产生语法错误，但可能引起命名冲突
14. main 函数的 return 可以省略，会默认 return 0，但是其他函数的 return 不可以省略
15. 如果程序运行后打开一个窗口立即关闭了，可以用两个 getchar() 来暂停程序，查看结果。
16. 本章解释了新特性列表中的前两项:各种数据类型的变量和常量。第4章“字符串和格式化的输入/输出”涵盖了最后三项内容，但本章将继续有限地使用scanf()和printf()。
17. C 语言中的 int 根据操作系统有不同的范围，ISO C 制定的范围是 16bits 的长度，一般的操作系统一个 int 的范围为一个字长，在如今流行的 32位/64位的操作系统中一般都是 4字节 32位的范围，即 -2^31 - （2^31 - 1）

### Chapter 3 Data and C

1. printf 中的格式化指示符若没有给出匹配的参数，则程序会使用当前在内存中的值来进行匹配，结果是不确定的。不仅因为内存中的值不同，不同的编译器对内存位置的管理也有不同。clang 15.0.6 会对没有参数匹配的格式化指示符进行警告。

   `````c
   #include <stdio.h>
   int main(void) {
       int ten = 10;
       int two = 2;
   
       printf("%d - %d = %d\n", ten, two, ten - two);
       printf("%d - %d = %d", ten); // 使用 clang 15.0.6 进行编译，若上一行未注释，则结果和上一行相同，若上一行注释，则除了第一个值是参数中的 10 以外，第二个值不确定，第三个值则在多次执行中都为 0
       
       return 0;
   }	
   `````

2. 和 JavaScript 中类似，C语言中可以使用 `0x` 或者 `0X` 表示16进制，`0`开头则表示8进制。比较新的 C 编译器（支持 C++ 14标准的扩展）也支持 `0b` 或者 `0B` 表示二进制。

3. 整数有以下类型 short，int，long，long long（C99），默认都是 signed。同一个类型有多种表示方式，如 short，short int， signed short， signed short int 都是表示的同一个类型，一般写 short 即可

4. MacOS 12 上的 gcc 12.2.0 和 clang 15.0.6 的 int 类型范围如下(C 只承诺short不超过 int 的范围，long 不小于 int 的范围，不同的系统和编译器可能有不同的结果，不同的类型所表示范围可能会有重叠的部分)

   |      type      |  bits  |                   range                   |
   | :------------: | :----: | :---------------------------------------: |
   |      char      | 8bits  |                 -128, 127                 |
   |     short      | 16bits |               -32768, 32767               |
   | unsigned short | 16bits |                 0, 65535                  |
   |      int       | 32bits |          -2147483648, 2147483647          |
   |  unsigned int  | 32bits |               0, 4294967295               |
   |      long      | 64bits | -9223372036854775808, 9223372036854775807 |
   | unsigned long  | 64bits |          0, 18446744073709551615          |

5. 类型选择: 若不需要负数，优先选择 unsigned 类型。在满足自己需求的情况下尽量选择小范围类型。若两个类型范围重叠，则选择理论上较大的那个，比如当前机器上 int 和 long 范围相同，则使用 long，long long 和 long 范围相同则选择 long long，这样到其他机器上代码也能正常运行。

6. 